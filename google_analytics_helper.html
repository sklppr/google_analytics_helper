<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>google_analytics_helper.rb</title>
  <link rel="stylesheet" href="http://jashkenas.github.com/docco/resources/docco.css">
</head>
<body>
<div id='container'>
  <div id="background"></div>
  <table cellspacing=0 cellpadding=0>
  <thead>
    <tr>
      <th class=docs><h1>google_analytics_helper.rb</h1></th>
      <th class=code></th>
    </tr>
  </thead>
  <tbody>
    <tr id='section-1'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-1">&#182;</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="k">module</span> <span class="nn">GoogleAnalyticsHelper</span>
  
  </pre></div>
      </td>
    </tr>
    <tr id='section-Google_Analytics_Helper'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Google_Analytics_Helper">&#182;</a>
        </div>
        <h1>Google Analytics Helper</h1>
      </td>
      <td class=code>
        <div class='highlight'><pre>  </pre></div>
      </td>
    </tr>
    <tr id='section-3'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-3">&#182;</a>
        </div>
        <p>Source: <a href="https://github.com/sklppr/google_analytics_helper">GitHub</a><br>
Author: <a href="https://twitter.com/sklppr">@sklppr</a></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  
  </pre></div>
      </td>
    </tr>
    <tr id='section-Basic_Functionality'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Basic_Functionality">&#182;</a>
        </div>
        <h2>Basic Functionality</h2>
      </td>
      <td class=code>
        <div class='highlight'><pre>  </pre></div>
      </td>
    </tr>
    <tr id='section-5'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-5">&#182;</a>
        </div>
        <p>Accessor for Google Analytics Queue (GAQ).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="kp">attr_accessor</span> <span class="ss">:gaq</span>
  
  </pre></div>
      </td>
    </tr>
    <tr id='section-6'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-6">&#182;</a>
        </div>
        <p>Initialize GAQ when instantiated.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
    <span class="k">super</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
    <span class="vi">@gaq</span> <span class="o">||=</span> <span class="o">[]</span>
  <span class="k">end</span>
  
  </pre></div>
      </td>
    </tr>
    <tr id='section-7'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-7">&#182;</a>
        </div>
        <p>Render Google Analytics snippet.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="k">def</span> <span class="nf">ga_snippet</span>
    <span class="n">current_gaq</span> <span class="o">=</span> <span class="n">gaq</span><span class="o">.</span><span class="n">clone</span> <span class="c1"># Copy current GAQ and ...</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">clear</span> <span class="c1"># ... clear actual GAQ to avoid commands being preserved in case ...</span>
    <span class="k">return</span> <span class="k">unless</span> <span class="n">config_id</span> <span class="o">||</span> <span class="n">config_defaults</span> <span class="c1"># ... GA is not configured and the snippet is not rendered.</span>
    <span class="n">commands</span> <span class="o">=</span> <span class="p">(</span><span class="n">default_gaq</span> <span class="o">+</span> <span class="n">current_gaq</span><span class="p">)</span><span class="o">.</span><span class="n">reduce</span> <span class="p">{</span> <span class="o">|</span><span class="n">str</span><span class="p">,</span> <span class="n">cmd</span><span class="o">|</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">str</span><span class="si">}</span><span class="s2">,</span><span class="si">#{</span><span class="n">cmd</span><span class="si">}</span><span class="s2">&quot;</span> <span class="p">}</span>
    <span class="n">file</span> <span class="o">=</span> <span class="p">(</span><span class="no">Rails</span><span class="o">.</span><span class="n">env</span> <span class="o">==</span> <span class="s2">&quot;development&quot;</span> <span class="o">||</span> <span class="n">config_debug</span><span class="p">)</span> <span class="p">?</span> <span class="s2">&quot;u/ga_debug.js&quot;</span> <span class="p">:</span> <span class="s2">&quot;ga.js&quot;</span>
    <span class="n">content_tag</span><span class="p">(</span><span class="ss">:script</span><span class="p">,</span> <span class="s2">&quot;var _gaq=[</span><span class="si">#{</span><span class="n">commands</span><span class="si">}</span><span class="s2">];(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=true;g.src=(&#39;https:&#39;==location.protocol?&#39;//ssl&#39;:&#39;//www&#39;)+&#39;.google-analytics.com/</span><span class="si">#{</span><span class="n">file</span><span class="si">}</span><span class="s2">&#39;;s.parentNode.insertBefore(g,s)}(document,&#39;script&#39;));&quot;</span><span class="o">.</span><span class="n">html_safe</span><span class="p">)</span>
  <span class="k">end</span>
  
  </pre></div>
      </td>
    </tr>
    <tr id='section-Configuration'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Configuration">&#182;</a>
        </div>
        <h2>Configuration</h2>
      </td>
      <td class=code>
        <div class='highlight'><pre>  </pre></div>
      </td>
    </tr>
    <tr id='section-9'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-9">&#182;</a>
        </div>
        <p>Default GAQ.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="k">def</span> <span class="nf">default_gaq</span>
    <span class="n">config_defaults</span> <span class="o">||</span> <span class="o">[[</span><span class="s2">&quot;_setAccount&quot;</span><span class="p">,</span> <span class="n">config_id</span><span class="o">]</span><span class="p">,</span> <span class="o">[</span><span class="s2">&quot;_trackPageview&quot;</span><span class="o">]</span><span class="p">,</span> <span class="o">[</span><span class="s2">&quot;_trackPageLoadTime&quot;</span><span class="o">]]</span>
  <span class="k">end</span>
  
  </pre></div>
      </td>
    </tr>
    <tr id='section-10'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-10">&#182;</a>
        </div>
        <p>Google Analytics ID from config.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="k">def</span> <span class="nf">config_id</span>
    <span class="no">Rails</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">respond_to?</span><span class="p">(</span><span class="ss">:google_analytics_id</span><span class="p">)</span> <span class="p">?</span> <span class="no">Rails</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">google_analytics_id</span> <span class="p">:</span> <span class="kp">false</span>
  <span class="k">end</span>
  
  </pre></div>
      </td>
    </tr>
    <tr id='section-11'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-11">&#182;</a>
        </div>
        <p>Default commands from config.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="k">def</span> <span class="nf">config_defaults</span>
    <span class="no">Rails</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">respond_to?</span><span class="p">(</span><span class="ss">:google_analytics_defaults</span><span class="p">)</span> <span class="p">?</span> <span class="no">Rails</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">google_analytics_defaults</span> <span class="p">:</span> <span class="kp">false</span>
  <span class="k">end</span>
  
  </pre></div>
      </td>
    </tr>
    <tr id='section-12'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-12">&#182;</a>
        </div>
        <p>Debug setting from config.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="k">def</span> <span class="nf">config_debug</span>
    <span class="no">Rails</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">respond_to?</span><span class="p">(</span><span class="ss">:google_analytics_debug</span><span class="p">)</span> <span class="p">?</span> <span class="no">Rails</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">google_analytics_debug</span> <span class="p">:</span> <span class="kp">false</span>
  <span class="k">end</span>
  
  </pre></div>
      </td>
    </tr>
    <tr id='section-Preserving_Commands'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Preserving_Commands">&#182;</a>
        </div>
        <h2>Preserving Commands</h2>
      </td>
      <td class=code>
        <div class='highlight'><pre>  </pre></div>
      </td>
    </tr>
    <tr id='section-14'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-14">&#182;</a>
        </div>
        <p>Preserve pending commands.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="k">def</span> <span class="nf">gaq_preserve</span>
    <span class="k">unless</span> <span class="n">gaq</span><span class="o">.</span><span class="n">empty?</span>
      <span class="n">flash</span><span class="o">[</span><span class="ss">:gaq</span><span class="o">]</span> <span class="o">=</span> <span class="n">gaq</span>
    <span class="k">end</span>
  <span class="k">end</span>
  
  </pre></div>
      </td>
    </tr>
    <tr id='section-15'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-15">&#182;</a>
        </div>
        <p>Restore GAQ from flash.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="k">def</span> <span class="nf">gaq_restore</span>
    <span class="k">if</span> <span class="n">flash</span><span class="o">[</span><span class="ss">:gaq</span><span class="o">]</span>
      <span class="n">gaq</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">flash</span><span class="o">[</span><span class="ss">:gaq</span><span class="o">]</span><span class="p">)</span>
      <span class="n">flash</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="ss">:gaq</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
  
  </pre></div>
      </td>
    </tr>
    <tr id='section-Google_Analytics_Tracking_Code'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Google_Analytics_Tracking_Code">&#182;</a>
        </div>
        <h2>Google Analytics Tracking Code</h2>
      </td>
      <td class=code>
        <div class='highlight'><pre>  </pre></div>
      </td>
    </tr>
    <tr id='section-17'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-17">&#182;</a>
        </div>
        <p><a href="http://code.google.com/apis/analytics/docs/gaJS/gaJSApi.html">API Docs</a></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  </pre></div>
      </td>
    </tr>
    <tr id='section-Handling_optional_arguments'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Handling_optional_arguments">&#182;</a>
        </div>
        <h3>Handling optional arguments</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>  </pre></div>
      </td>
    </tr>
    <tr id='section-19'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-19">&#182;</a>
        </div>
        <p>Singleton to ouput <code>undefinded</code> instead of <code>&ldquo;undefined&rdquo;</code>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="k">class</span> <span class="nc">Undefined</span>
    <span class="kp">include</span> <span class="no">Singleton</span>
    <span class="k">def</span> <span class="nf">to_s</span><span class="p">;</span> <span class="s2">&quot;undefined&quot;</span> <span class="k">end</span>
    <span class="k">alias</span> <span class="ss">:to_str</span> <span class="ss">:to_s</span>
  <span class="k">end</span>
  
  </pre></div>
      </td>
    </tr>
    <tr id='section-20'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-20">&#182;</a>
        </div>
        <p>Merge mandatory and optional params into one array, replacing <code>nil</code> with <code>undefined</code>.
Usage: <code>with_opt([param, param, param], opt_param, opt_param)</code></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="k">def</span> <span class="nf">with_opt</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">arg</span><span class="o">|</span> <span class="n">array</span><span class="o">.</span><span class="n">push</span> <span class="p">(</span><span class="n">arg</span><span class="o">.</span><span class="n">nil?</span> <span class="p">?</span> <span class="no">Undefined</span><span class="o">.</span><span class="n">instance</span> <span class="p">:</span> <span class="n">arg</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">array</span>
  <span class="k">end</span>
  
  </pre></div>
      </td>
    </tr>
    <tr id='section-&lt;a_href=&quot;http://code.google.com/apis/analytics/docs/gaJS/gaJSApiBasicConfiguration.html&quot;&gt;Basic_Configuration&lt;/a&gt;'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-&lt;a_href=&quot;http://code.google.com/apis/analytics/docs/gaJS/gaJSApiBasicConfiguration.html&quot;&gt;Basic_Configuration&lt;/a&gt;">&#182;</a>
        </div>
        <h3><a href="http://code.google.com/apis/analytics/docs/gaJS/gaJSApiBasicConfiguration.html">Basic Configuration</a></h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>  
  <span class="k">def</span> <span class="nf">_deleteCustomVar</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_deleteCustomVar&quot;</span><span class="p">,</span> <span class="n">index</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_getName</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_getName&quot;</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_getAccount</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_getAccount&quot;</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_getVersion</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_getVersion&quot;</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_getVisitorCustomVar</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_getVisitorCustomVar&quot;</span><span class="p">,</span> <span class="n">index</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_setAccount</span><span class="p">(</span><span class="n">accountID</span><span class="p">)</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_setAccount&quot;</span><span class="p">,</span> <span class="n">accountID</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_setCustomVar</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="nb">name</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">opt_scope</span><span class="o">=</span><span class="kp">nil</span><span class="p">)</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="n">with_opt</span><span class="p">(</span><span class="o">[</span><span class="s2">&quot;_setCustomVar&quot;</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="nb">name</span><span class="p">,</span> <span class="n">value</span><span class="o">]</span><span class="p">,</span> <span class="n">opt_scope</span><span class="p">)</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_setSampleRate</span><span class="p">(</span><span class="n">newRate</span><span class="p">)</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_setSampleRate&quot;</span><span class="p">,</span> <span class="n">newRate</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_setSessionCookieTimeout</span><span class="p">(</span><span class="n">cookieTimeoutMillis</span><span class="p">)</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_setSessionCookieTimeout&quot;</span><span class="p">,</span> <span class="n">cookieTimeoutMillis</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_setVisitorCookieTimeout</span><span class="p">(</span><span class="n">cookieTimeoutMillis</span><span class="p">)</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_setVisitorCookieTimeout&quot;</span><span class="p">,</span> <span class="n">cookieTimeoutMillis</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_trackPageLoadTime</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_trackPageLoadTime&quot;</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_trackPageview</span><span class="p">(</span><span class="n">opt_pageURL</span><span class="o">=</span><span class="kp">nil</span><span class="p">)</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="n">with_opt</span><span class="p">(</span><span class="o">[</span><span class="s2">&quot;_trackPageview&quot;</span><span class="o">]</span><span class="p">,</span> <span class="n">opt_pageURL</span><span class="p">)</span>
  <span class="k">end</span>
  
  </pre></div>
      </td>
    </tr>
    <tr id='section-&lt;a_href=&quot;http://code.google.com/apis/analytics/docs/gaJS/gaJSApiCampaignTracking.html&quot;&gt;Campaign_Tracking&lt;/a&gt;'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-&lt;a_href=&quot;http://code.google.com/apis/analytics/docs/gaJS/gaJSApiCampaignTracking.html&quot;&gt;Campaign_Tracking&lt;/a&gt;">&#182;</a>
        </div>
        <h3><a href="http://code.google.com/apis/analytics/docs/gaJS/gaJSApiCampaignTracking.html">Campaign Tracking</a></h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>   
  <span class="k">def</span> <span class="nf">_setAllowAnchor</span><span class="p">(</span><span class="n">bool</span><span class="p">)</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_setAllowAnchor&quot;</span><span class="p">,</span> <span class="n">bool</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_setCampContentKey</span><span class="p">(</span><span class="n">newCampContentKey</span><span class="p">)</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_setCampContentKey&quot;</span><span class="p">,</span> <span class="n">newCampContentKey</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_setCampMediumKey</span><span class="p">(</span><span class="n">newCampMedKey</span><span class="p">)</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_setCampMediumKey&quot;</span><span class="p">,</span> <span class="n">newCampMedKey</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_setCampNameKey</span><span class="p">(</span><span class="n">newCampNameKey</span><span class="p">)</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_setCampNameKey&quot;</span><span class="p">,</span> <span class="n">newCampNameKey</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_setCampNOKey</span><span class="p">(</span><span class="n">newCampNOKey</span><span class="p">)</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_setCampNOKey&quot;</span><span class="p">,</span> <span class="n">newCampNOKey</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_setCampSourceKey</span><span class="p">(</span><span class="n">newCampSrcKey</span><span class="p">)</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_setCampSourceKey&quot;</span><span class="p">,</span> <span class="n">newCampSrcKey</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_setCampTermKey</span><span class="p">(</span><span class="n">newCampTermKey</span><span class="p">)</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_setCampTermKey&quot;</span><span class="p">,</span> <span class="n">newCampTermKey</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_setCampaignTrack</span><span class="p">(</span><span class="n">bool</span><span class="p">)</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_setCampaignTrack&quot;</span><span class="p">,</span> <span class="n">bool</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_setCampaignCookieTimeout</span><span class="p">(</span><span class="n">cookieTimeoutMillis</span><span class="p">)</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_setCampaignCookieTimeout&quot;</span><span class="p">,</span> <span class="n">cookieTimeoutMillis</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_setReferrerOverride</span><span class="p">(</span><span class="n">newReferrerUrl</span><span class="p">)</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_setReferrerOverride&quot;</span><span class="p">,</span> <span class="n">newReferrerUrl</span><span class="o">]</span>
  <span class="k">end</span>
  
  </pre></div>
      </td>
    </tr>
    <tr id='section-&lt;a_href=&quot;http://code.google.com/apis/analytics/docs/gaJS/gaJSApiDomainDirectory.html&quot;&gt;Domains_&amp;amp;_Directories&lt;/a&gt;'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-&lt;a_href=&quot;http://code.google.com/apis/analytics/docs/gaJS/gaJSApiDomainDirectory.html&quot;&gt;Domains_&amp;amp;_Directories&lt;/a&gt;">&#182;</a>
        </div>
        <h3><a href="http://code.google.com/apis/analytics/docs/gaJS/gaJSApiDomainDirectory.html">Domains &amp; Directories</a></h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>  
  <span class="k">def</span> <span class="nf">_cookiePathCopy</span><span class="p">(</span><span class="n">newPath</span><span class="p">)</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_cookiePathCopy&quot;</span><span class="p">,</span> <span class="n">newPath</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_getLinkerUrl</span><span class="p">(</span><span class="n">targetUrl</span><span class="p">,</span> <span class="n">useHash</span><span class="p">)</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_getLinkerUrl&quot;</span><span class="p">,</span> <span class="n">targetUrl</span><span class="p">,</span> <span class="n">useHash</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_link</span><span class="p">(</span><span class="n">targetUrl</span><span class="p">,</span> <span class="n">useHash</span><span class="p">)</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_link&quot;</span><span class="p">,</span> <span class="n">targetUrl</span><span class="p">,</span> <span class="n">useHash</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_linkByPost</span><span class="p">(</span><span class="n">formObject</span><span class="p">,</span> <span class="n">useHash</span><span class="p">)</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_linkByPost&quot;</span><span class="p">,</span> <span class="n">formObject</span><span class="p">,</span> <span class="n">useHash</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_setAllowLinker</span><span class="p">(</span><span class="n">bool</span><span class="p">)</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_setAllowLinker&quot;</span><span class="p">,</span> <span class="n">bool</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_setCookiePath</span><span class="p">(</span><span class="n">newCookiePath</span><span class="p">)</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_setCookiePath&quot;</span><span class="p">,</span> <span class="n">newCookiePath</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_setDomainName</span><span class="p">(</span><span class="n">newDomainName</span><span class="p">)</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_setDomainName&quot;</span><span class="p">,</span> <span class="n">newDomainName</span><span class="o">]</span>
  <span class="k">end</span>
  
  </pre></div>
      </td>
    </tr>
    <tr id='section-&lt;a_href=&quot;http://code.google.com/apis/analytics/docs/gaJS/gaJSApiEcommerce.html&quot;&gt;E-Commerce&lt;/a&gt;'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-&lt;a_href=&quot;http://code.google.com/apis/analytics/docs/gaJS/gaJSApiEcommerce.html&quot;&gt;E-Commerce&lt;/a&gt;">&#182;</a>
        </div>
        <h3><a href="http://code.google.com/apis/analytics/docs/gaJS/gaJSApiEcommerce.html">E-Commerce</a></h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>  
  <span class="k">def</span> <span class="nf">_addItem</span><span class="p">(</span><span class="n">orderId</span><span class="p">,</span> <span class="n">sku</span><span class="p">,</span> <span class="nb">name</span><span class="p">,</span> <span class="n">category</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">quantity</span><span class="p">)</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_addItem&quot;</span><span class="p">,</span> <span class="n">orderId</span><span class="p">,</span> <span class="n">sku</span><span class="p">,</span> <span class="nb">name</span><span class="p">,</span> <span class="n">category</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">quantity</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_addTrans</span><span class="p">(</span><span class="n">orderId</span><span class="p">,</span> <span class="n">affiliation</span><span class="p">,</span> <span class="n">total</span><span class="p">,</span> <span class="n">tax</span><span class="p">,</span> <span class="n">shipping</span><span class="p">,</span> <span class="n">city</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">country</span><span class="p">)</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_addTrans&quot;</span><span class="p">,</span> <span class="n">orderId</span><span class="p">,</span> <span class="n">affiliation</span><span class="p">,</span> <span class="n">total</span><span class="p">,</span> <span class="n">tax</span><span class="p">,</span> <span class="n">shipping</span><span class="p">,</span> <span class="n">city</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">country</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_trackTrans</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_trackTrans&quot;</span><span class="o">]</span>
  <span class="k">end</span>
  
  </pre></div>
      </td>
    </tr>
    <tr id='section-&lt;a_href=&quot;http://code.google.com/apis/analytics/docs/gaJS/gaJSApiEventTracking.html&quot;&gt;Event_Tracking&lt;/a&gt;'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-&lt;a_href=&quot;http://code.google.com/apis/analytics/docs/gaJS/gaJSApiEventTracking.html&quot;&gt;Event_Tracking&lt;/a&gt;">&#182;</a>
        </div>
        <h3><a href="http://code.google.com/apis/analytics/docs/gaJS/gaJSApiEventTracking.html">Event Tracking</a></h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>  
  <span class="k">def</span> <span class="nf">_trackEvent</span><span class="p">(</span><span class="n">category</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="n">opt_label</span><span class="o">=</span><span class="kp">nil</span><span class="p">,</span> <span class="n">opt_value</span><span class="o">=</span><span class="kp">nil</span><span class="p">)</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="n">with_opt</span><span class="p">(</span><span class="o">[</span><span class="s2">&quot;_trackEvent&quot;</span><span class="p">,</span> <span class="n">category</span><span class="p">,</span> <span class="n">action</span><span class="o">]</span><span class="p">,</span> <span class="n">opt_label</span><span class="p">,</span> <span class="n">opt_value</span><span class="p">)</span>
  <span class="k">end</span>
  
  </pre></div>
      </td>
    </tr>
    <tr id='section-&lt;a_href=&quot;http://code.google.com/apis/analytics/docs/gaJS/gaJSApiSearchEngines.html&quot;&gt;Search_Engines_and_Referrers&lt;/a&gt;'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-&lt;a_href=&quot;http://code.google.com/apis/analytics/docs/gaJS/gaJSApiSearchEngines.html&quot;&gt;Search_Engines_and_Referrers&lt;/a&gt;">&#182;</a>
        </div>
        <h3><a href="http://code.google.com/apis/analytics/docs/gaJS/gaJSApiSearchEngines.html">Search Engines and Referrers</a></h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>  
  <span class="k">def</span> <span class="nf">_addIgnoredOrganic</span><span class="p">(</span><span class="n">newIgnoredOrganicKeyword</span><span class="p">)</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_addIgnoredOrganic&quot;</span><span class="p">,</span> <span class="n">newIgnoredOrganicKeyword</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_addIgnoredRef</span><span class="p">(</span><span class="n">newIgnoredReferrer</span><span class="p">)</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_addIgnoredRef&quot;</span><span class="p">,</span> <span class="n">newIgnoredReferrer</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_addOrganic</span><span class="p">(</span><span class="n">newOrganicEngine</span><span class="p">,</span> <span class="n">newOrganicKeyword</span><span class="p">,</span> <span class="n">opt_prepend</span><span class="o">=</span><span class="kp">nil</span><span class="p">)</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="n">with_opt</span><span class="p">(</span><span class="o">[</span><span class="s2">&quot;_addOrganic&quot;</span><span class="p">,</span> <span class="n">newOrganicEngine</span><span class="p">,</span> <span class="n">newOrganicKeyword</span><span class="o">]</span><span class="p">,</span> <span class="n">opt_prepend</span><span class="p">)</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_clearIgnoredOrganic</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_clearIgnoredOrganic&quot;</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_clearIgnoredRef</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_clearIgnoredRef&quot;</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_clearOrganic</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_clearOrganic&quot;</span><span class="o">]</span>
  <span class="k">end</span>
  
  </pre></div>
      </td>
    </tr>
    <tr id='section-&lt;a_href=&quot;http://code.google.com/apis/analytics/docs/gaJS/gaJSApiSocialTracking.html&quot;&gt;Social_Interactions&lt;/a&gt;'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-&lt;a_href=&quot;http://code.google.com/apis/analytics/docs/gaJS/gaJSApiSocialTracking.html&quot;&gt;Social_Interactions&lt;/a&gt;">&#182;</a>
        </div>
        <h3><a href="http://code.google.com/apis/analytics/docs/gaJS/gaJSApiSocialTracking.html">Social Interactions</a></h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>  
  <span class="k">def</span> <span class="nf">_trackSocial</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">socialAction</span><span class="p">,</span> <span class="n">opt_target</span><span class="o">=</span><span class="kp">nil</span><span class="p">,</span> <span class="n">opt_pagePath</span><span class="o">=</span><span class="kp">nil</span><span class="p">)</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="n">with_opt</span><span class="p">(</span><span class="o">[</span><span class="s2">&quot;_trackSocial&quot;</span><span class="p">,</span> <span class="n">network</span><span class="p">,</span> <span class="n">socialAction</span><span class="o">]</span><span class="p">,</span> <span class="n">opt_target</span><span class="p">,</span> <span class="n">opt_pagePath</span><span class="p">)</span>
  <span class="k">end</span>
  
  </pre></div>
      </td>
    </tr>
    <tr id='section-&lt;a_href=&quot;http://code.google.com/apis/analytics/docs/gaJS/gaJSApiWebClient.html&quot;&gt;Web_Client&lt;/a&gt;'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-&lt;a_href=&quot;http://code.google.com/apis/analytics/docs/gaJS/gaJSApiWebClient.html&quot;&gt;Web_Client&lt;/a&gt;">&#182;</a>
        </div>
        <h3><a href="http://code.google.com/apis/analytics/docs/gaJS/gaJSApiWebClient.html">Web Client</a></h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>  
  <span class="k">def</span> <span class="nf">_getClientInfo</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_getClientInfo&quot;</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_getDetectFlash</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_getDetectFlash&quot;</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_getDetectTitle</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_getDetectTitle&quot;</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_setClientInfo</span><span class="p">(</span><span class="n">bool</span><span class="p">)</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_setClientInfo&quot;</span><span class="p">,</span> <span class="n">bool</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_setDetectFlash</span><span class="p">(</span><span class="n">bool</span><span class="p">)</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_setDetectFlash&quot;</span><span class="p">,</span> <span class="n">bool</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_setDetectTitle</span><span class="p">(</span><span class="n">bool</span><span class="p">)</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_setDetectTitle&quot;</span><span class="p">,</span> <span class="n">bool</span><span class="o">]</span>
  <span class="k">end</span>
  
  </pre></div>
      </td>
    </tr>
    <tr id='section-&lt;a_href=&quot;http://code.google.com/apis/analytics/docs/gaJS/gaJSApiUrchin.html&quot;&gt;Urchin_Server&lt;/a&gt;'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-&lt;a_href=&quot;http://code.google.com/apis/analytics/docs/gaJS/gaJSApiUrchin.html&quot;&gt;Urchin_Server&lt;/a&gt;">&#182;</a>
        </div>
        <h3><a href="http://code.google.com/apis/analytics/docs/gaJS/gaJSApiUrchin.html">Urchin Server</a></h3>

      </td>
      <td class=code>
        <div class='highlight'><pre>  
  <span class="k">def</span> <span class="nf">_getLocalGifPath</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_getLocalGifPath&quot;</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_getServiceMode</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_getServiceMode&quot;</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_setLocalGifPath</span><span class="p">(</span><span class="n">newLocalGifPath</span><span class="p">)</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_setLocalGifPath&quot;</span><span class="p">,</span> <span class="n">newLocalGifPath</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_setLocalRemoteServerMode</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_setLocalRemoteServerMode&quot;</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_setLocalServerMode</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_setLocalServerMode&quot;</span><span class="o">]</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">_setRemoteServerMode</span>
    <span class="n">gaq</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="s2">&quot;_setRemoteServerMode&quot;</span><span class="o">]</span>
  <span class="k">end</span>
  
  
<span class="k">end</span></pre></div>
      </td>
    </tr>
  </table>
</div>
</body>
